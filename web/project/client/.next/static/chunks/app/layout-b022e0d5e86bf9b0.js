(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9041:function(e,t,a){Promise.resolve().then(a.t.bind(a,9646,23)),Promise.resolve().then(a.t.bind(a,3385,23)),Promise.resolve().then(a.bind(a,983)),Promise.resolve().then(a.bind(a,1434)),Promise.resolve().then(a.bind(a,8903)),Promise.resolve().then(a.bind(a,9864)),Promise.resolve().then(a.bind(a,7678)),Promise.resolve().then(a.bind(a,9664))},2778:function(e,t){"use strict";t.Z="http://".concat("localhost",":").concat("3001","/")},983:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var n=a(7437),r=a(2265),i=a(5104);async function s(){if(null!=window.ethereum)return new i.Q(window.ethereum);console.log("Metmask is not installed, using read only defaults.")}function o(){return r.useEffect(()=>{s().then(async e=>{void 0!==e&&(window.provider=e)})}),(0,n.jsx)("div",{id:"connectWalletInBackground"})}},1434:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var n=a(7437),r=a(2265),i=a(8478),s=a(2778);async function o(e,t,a,n,r,i){let o=new FormData;o.append("roomTitle",e),o.append("physicalAddress",t),o.append("image",a),o.append("price",n.toString()),o.append("canReserve",r.toString()),o.append("roomOwner",i);let l=await fetch(s.Z+"contract/addRoom",{method:"POST",body:o}),d=await l.json();return console.log(d.result),0==d.result}async function l(e){let t=URL.createObjectURL(e),a=await (await fetch(t)).arrayBuffer(),n="",r=new Uint8Array(a),i=r.byteLength;for(let e=0;e<i;e++)n+=String.fromCharCode(r[e]);return window.btoa(n)}function d(){let e=(0,r.useRef)(null);return(0,n.jsx)(i.Z,{title:"Add a room",body:(0,n.jsxs)("div",{ref:e,children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"roomTitle",className:"form-label",children:"Room title"}),(0,n.jsx)("input",{type:"text",required:!0,className:"form-control",id:"roomTitle",name:"roomTitle","aria-describedby":"roomHelp"}),(0,n.jsx)("div",{id:"roomHelp",className:"form-text",children:"What special title do you want for your room?"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"physicalAddress",className:"form-label",children:"Physical Address"}),(0,n.jsx)("input",{type:"text",required:!0,className:"form-control",id:"physicalAddress",name:"physicalAddress","aria-describedby":"physicalAddressHelp"}),(0,n.jsx)("div",{id:"physicalAddressHelp",className:"form-text",children:"What is your rooms physical address?"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"image",className:"form-label",children:"Image"}),(0,n.jsx)("input",{type:"file",required:!0,className:"form-control",id:"image",name:"image","aria-describedby":"imageHelp",onChange:async t=>{let a=e.current.querySelector("#preview");null===t.target.files?a.src="":a.src="data:image/png;base64, "+await l(t.target.files[0])}}),(0,n.jsx)("div",{id:"imageHelp",className:"form-text",children:"Images must be a URL, otherwise the Smart Contract becomes too expensive."}),(0,n.jsx)("img",{id:"preview",width:200,height:200})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"price",className:"form-label",children:"Price in Wei"}),(0,n.jsx)("input",{type:"number",required:!0,className:"form-control",id:"price",name:"price","aria-describedby":"priceHelp"}),(0,n.jsx)("div",{id:"priceHelp",className:"form-text",children:"What is the price for your room? Values must be in Wei!"})]}),(0,n.jsxs)("div",{className:"mb-3 form-check",children:[(0,n.jsx)("input",{type:"checkbox",required:!0,className:"form-check-input",id:"canReserve"}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"canReserve",children:"Can the room be reserved currently?"})]})]}),modalId:"addRoomModal",onPos:async()=>{if(void 0===window.provider){alert("No Wallet provider avaialable.");return}let t={roomTitle:e.current.querySelector("#roomTitle"),physicalAddress:e.current.querySelector("#physicalAddress"),image:e.current.querySelector("#image").files[0],price:e.current.querySelector("#price"),canReserve:e.current.querySelector("#canReserve")},a=await window.provider.getSigner(),n=await o(t.roomTitle.value,t.physicalAddress.value,t.image,Number(t.price.value),t.canReserve.checked,await a.getAddress());if(console.log(n),!n){alert("Failed to add room. Please try again.");return}t.roomTitle.value="",t.physicalAddress.value="",t.price.values="",alert("Successfully added room. Please check the Rooms tab.")},posButtonTitle:"Add"})}},8478:function(e,t,a){"use strict";var n=a(7437);a(2265),t.Z=e=>{let{title:t,body:a,onPos:r,modalId:i,posButtonTitle:s}=e;return(0,n.jsx)("div",{id:i,className:"modal",tabIndex:-1,children:(0,n.jsx)("div",{className:"modal-dialog",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",children:t}),(0,n.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,n.jsx)("div",{className:"modal-body",children:a}),(0,n.jsxs)("div",{className:"modal-footer",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),(0,n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:r,children:null!==s?s:"Save Changes"})]})]})})})}},8903:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(7437),r=a(2265),i=a(8478),s=a(2778);async function o(e,t,a){let n=await fetch(s.Z+"contract/updateStatus",{method:"POST",body:JSON.stringify({roomId:e,canReserve:t,from:a}),headers:{"content-type":"application/json"}}),r=await n.json();return console.log(r),0==r.result}function l(){let e=(0,r.useRef)(null);return(0,n.jsx)(i.Z,{title:"Change Room Status",body:(0,n.jsxs)("div",{ref:e,children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"roomId",className:"form-label",children:"Room ID"}),(0,n.jsx)("input",{type:"number",className:"form-control",id:"roomId",name:"roomId","aria-describedby":"roomIdHelp"}),(0,n.jsx)("div",{id:"roomId",className:"form-text",children:"The rooms ID"})]}),(0,n.jsxs)("div",{className:"mb-3 form-check",children:[(0,n.jsx)("input",{type:"checkbox",className:"form-check-input",id:"canReserve"}),(0,n.jsx)("label",{className:"form-check-label",htmlFor:"canReserve",children:"Can the room be reserved currently?"})]})]}),modalId:"changeRoomStatusModal",posButtonTitle:"Change",onPos:async()=>{if(void 0===window.provider){alert("No Wallet provider avaialable");return}let t={roomId:e.current.querySelector("#roomId"),canReserve:e.current.querySelector("#canReserve")},a=await window.provider.getSigner();if(!await o(Number(t.roomId.value),t.canReserve.checked,await a.getAddress())){alert("Error while changing room reservation status");return}alert("Room reservation status changed. Check rooms tab"),t.roomId.value=""}})}},9864:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(7437),r=a(2265),i=a(8478),s=a(2778);async function o(e,t,a){let n=await fetch(s.Z+"contract/deleteReservation",{method:"POST",body:JSON.stringify({roomId:e,reservationId:t,deleter:a}),headers:{"content-type":"application/json"}}),r=await n.json();return console.log(r),0==r.result}function l(){let e=(0,r.useRef)(null);return(0,n.jsx)(i.Z,{title:"Delete a Reservation",body:(0,n.jsxs)("div",{ref:e,children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"roomId",className:"form-label",children:"Room ID"}),(0,n.jsx)("input",{type:"number",className:"form-control",id:"roomId",name:"roomId","aria-describedby":"roomIdHelp"}),(0,n.jsx)("div",{id:"roomId",className:"form-text",children:"The rooms ID"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"reservationId",className:"form-label",children:"Reservation ID"}),(0,n.jsx)("input",{type:"number",className:"form-control",id:"reservationId",name:"reservationId","aria-describedby":"reservationIdHelp"}),(0,n.jsx)("div",{id:"reservationIdHelp",className:"form-text",children:"The reservations ID"})]})]}),modalId:"deleteReservationModal",posButtonTitle:"Delete",onPos:async()=>{if(void 0===window.provider){alert("No Wallet provider avaialable");return}let t={roomId:e.current.querySelector("#roomId"),reservationId:e.current.querySelector("#reservationId")},a=await window.provider.getSigner();if(!await o(Number(t.roomId.value),Number(t.reservationId.value),await a.getAddress())){alert("Error deleting reservation.");return}alert("Reservation has been deleted. Check reservations"),t.roomId.value="",t.reservationId.value=""}})}},7678:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(7437),r=a(2265),i=a(8478),s=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"stateMutability":"payable","type":"fallback"},{"inputs":[{"internalType":"string","name":"_title","type":"string"},{"internalType":"string","name":"_physicalAddress","type":"string"},{"internalType":"string","name":"_image","type":"string"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"bool","name":"_canReserve","type":"bool"},{"internalType":"address","name":"roomOwner","type":"address"}],"name":"addRoom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"},{"internalType":"uint256","name":"reservationId","type":"uint256"},{"internalType":"address","name":"deleter","type":"address"}],"name":"deleteReservation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getPayments","outputs":[{"components":[{"internalType":"address","name":"payer","type":"address"},{"internalType":"address","name":"payee","type":"address"},{"internalType":"uint256","name":"datePaid","type":"uint256"},{"internalType":"uint256","name":"reservationId","type":"uint256"}],"internalType":"struct RoomReservations.Payment[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPaymentsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getReservations","outputs":[{"components":[{"internalType":"address","name":"reserver","type":"address"},{"internalType":"uint256","name":"roomId","type":"uint256"},{"internalType":"uint256","name":"startDate","type":"uint256"},{"internalType":"uint256","name":"endDate","type":"uint256"},{"internalType":"bool","name":"isPaid","type":"bool"}],"internalType":"struct RoomReservations.Reservation[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"getReservationsFor","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"}],"name":"getReservationsForLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getReservationsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRooms","outputs":[{"components":[{"internalType":"string","name":"title","type":"string"},{"internalType":"string","name":"physicalAddress","type":"string"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"image","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"bool","name":"canReserve","type":"bool"}],"internalType":"struct RoomReservations.Room[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRoomsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"reservationId","type":"uint256"}],"name":"makePayment","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"},{"internalType":"uint256","name":"startDate","type":"uint256"},{"internalType":"uint256","name":"endDate","type":"uint256"},{"internalType":"bool","name":"checkReserved","type":"bool"},{"internalType":"address","name":"reserver","type":"address"}],"name":"makeReservation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"payments","outputs":[{"internalType":"address","name":"payer","type":"address"},{"internalType":"address","name":"payee","type":"address"},{"internalType":"uint256","name":"datePaid","type":"uint256"},{"internalType":"uint256","name":"reservationId","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"reservations","outputs":[{"internalType":"address","name":"reserver","type":"address"},{"internalType":"uint256","name":"roomId","type":"uint256"},{"internalType":"uint256","name":"startDate","type":"uint256"},{"internalType":"uint256","name":"endDate","type":"uint256"},{"internalType":"bool","name":"isPaid","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"reservationsFor","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"rooms","outputs":[{"internalType":"string","name":"title","type":"string"},{"internalType":"string","name":"physicalAddress","type":"string"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"image","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"bool","name":"canReserve","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"roomId","type":"uint256"},{"internalType":"bool","name":"status","type":"bool"},{"internalType":"address","name":"from","type":"address"}],"name":"updateRoomReservationStatus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]'),o=a(6039);function l(){let e=(0,r.useRef)(null);return(0,n.jsx)(i.Z,{title:"Make Payment",body:(0,n.jsx)("div",{ref:e,children:(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"reservationId",className:"form-label",children:"Reservation ID"}),(0,n.jsx)("input",{type:"number",className:"form-control",id:"reservationId",name:"reservationId","aria-describedby":"reservationIdHelp"}),(0,n.jsx)("div",{id:"reservationIdHelp",className:"form-text",children:"The reservations ID"})]})}),modalId:"makePaymentModal",posButtonTitle:"Pay",onPos:async()=>{if(void 0===window.provider){alert("No Wallet provider avaialable");return}let t={reservationId:e.current.querySelector("#reservationId")},a=function(e){let t=new o.CH("0x426D808652D3B6D958813d5F158e67157995a84e",s,e);return window.contract=t,t}(await window.provider.getSigner()),n=await a.reservations(Number(t.reservationId.value)),r=(await a.rooms(n[1]))[4];a.makePayment(Number(t.reservationId.value),{value:r}).then(async e=>{await e.wait(),alert("Payment has been made for reservation: #"+t.reservationId.value),console.log(await a.payments(await a.getPaymentsLength()-1)),t.reservationId.value=""}).catch(e=>{alert(e)})}})}},9664:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(7437),r=a(2265),i=a(8478),s=a(2778);async function o(e,t,a,n){let r=JSON.stringify({roomId:e,startDate:t,endDate:a,reserver:n});console.log(r);let i=await fetch(s.Z+"contract/makeReservation",{method:"POST",body:r,headers:{"content-type":"application/json"}}),o=await i.json();return console.log(o),0==o.result}function l(){let e=(0,r.useRef)(null);return(0,n.jsx)(i.Z,{title:"Make a Reservation",body:(0,n.jsxs)("div",{ref:e,children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"roomId",className:"form-label",children:"Room ID"}),(0,n.jsx)("input",{type:"number",className:"form-control",id:"roomId",name:"roomId","aria-describedby":"roomIdHelp"}),(0,n.jsx)("div",{id:"roomId",className:"form-text",children:"The rooms ID"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"startDate",className:"form-label",children:"Start Date"}),(0,n.jsx)("input",{type:"date",className:"form-control",id:"startDate",name:"startDate","aria-describedby":"startDateHelp"}),(0,n.jsx)("div",{id:"startDateHelp",className:"form-text",children:"What is the start date for your reservation?"})]}),(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:"endDate",className:"form-label",children:"End Date"}),(0,n.jsx)("input",{type:"date",className:"form-control",id:"endDate",name:"endDate","aria-describedby":"endDateHelp"}),(0,n.jsx)("div",{id:"endDateHelp",className:"form-text",children:"What is the end date for your reservation?"})]})]}),modalId:"makeReservationModal",posButtonTitle:"Reserve",onPos:async()=>{if(void 0===window.provider){alert("No Wallet provider avaialable");return}let t={roomId:e.current.querySelector("#roomId"),startDate:e.current.querySelector("#startDate"),endDate:e.current.querySelector("#endDate")},a=await window.provider.getSigner();if(!await o(Number(t.roomId.value),new Date(t.startDate.value).getTime()/1e3,new Date(t.endDate.value).getTime()/1e3,await a.getAddress())){alert("Reservation failed");return}alert("Reservation has been made. Check Reservations tab."),t.roomId.value="",t.startDate.value="",t.endDate.value=""}})}},3385:function(){}},function(e){e.O(0,[947,971,69,744],function(){return e(e.s=9041)}),_N_E=e.O()}]);